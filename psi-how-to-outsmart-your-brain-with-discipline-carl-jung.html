<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>How to Outsmart Your Brain with Discipline â€” Carl Jung | Interactive Infographic</title>
  <meta name="description" content="Interactive infographic exploring Carl Jung's perspective on discipline: why willpower fails, how the unconscious drives behavior, and how to design your life so discipline becomes unnecessary." />
  <style>
    :root{
      --bg: #0b0f17;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.085);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --faint: rgba(255,255,255,.55);
      --good: #75f0b6;
      --warn: #ffd27a;
      --bad: #ff7a99;
      --cyan: #7ad7ff;
      --violet: #bba7ff;
      --orange: #ffb38a;
      --shadow: 0 16px 60px rgba(0,0,0,.45);
      --shadow2: 0 10px 25px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 14px;
      --grid: rgba(255,255,255,.07);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(187,167,255,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 15%, rgba(122,215,255,.10), transparent 55%),
        radial-gradient(800px 500px at 55% 85%, rgba(117,240,182,.08), transparent 60%),
        linear-gradient(180deg, #070a10, var(--bg));
      overflow-x:hidden;
    }

    a{color:inherit}

    .wrap{max-width:1220px;margin:0 auto;padding:34px 18px 70px}

    /* Header */
    header{
      position: relative;
      padding: 26px 18px 22px;
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .headerGrid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 18px;
      align-items: start;
    }
    .kicker{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      font-size: 12px;
      letter-spacing:.12em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .kicker .dot{width:8px;height:8px;border-radius:99px;background: linear-gradient(90deg, var(--violet), var(--cyan)); box-shadow: 0 0 22px rgba(187,167,255,.25)}

    h1{margin:14px 0 10px;font-size: clamp(26px, 3.1vw, 44px);line-height:1.04;letter-spacing:-0.02em}
    .subtitle{margin:0 0 14px;color:var(--muted);font-size: 15px;line-height:1.55;max-width:72ch}

    .topStats{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
      align-content: start;
    }
    .stat{
      border: 1px solid var(--stroke);
      border-radius: var(--radius2);
      background: rgba(0,0,0,.18);
      padding: 12px 12px 10px;
      box-shadow: var(--shadow2);
      min-height: 84px;
    }
    .stat .label{font-size:12px;color:var(--faint);text-transform:uppercase;letter-spacing:.12em}
    .stat .value{margin-top:7px;font-weight:700;font-size: 18px}
    .stat .note{margin-top:4px;font-size:12px;color:var(--muted)}

    .heroArt{
      position:absolute;inset:-1px -1px auto auto;
      width:min(520px, 55vw);
      height: 220px;
      pointer-events:none;
      opacity:.9;
      mask-image: radial-gradient(240px 180px at 65% 40%, rgba(0,0,0,1), rgba(0,0,0,.0) 70%);
    }

    /* Layout */
    .grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    .row{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 14px;
    }

    @media (max-width: 960px){
      .headerGrid{grid-template-columns: 1fr}
      .row{grid-template-columns: 1fr}
      .heroArt{height:160px}
    }

    /* Cards */
    .card{
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      background: rgba(255,255,255,.05);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .cardHeader{
      display:flex;justify-content:space-between;align-items:flex-start;gap: 12px;
      padding: 14px 16px 10px;
      border-bottom: 1px solid rgba(255,255,255,.09);
      background: linear-gradient(180deg, rgba(0,0,0,.18), transparent);
    }
    .cardHeader h2{margin:0;font-size: 16px;letter-spacing:-0.01em}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      font-size: 12px;
      user-select:none;
      white-space:nowrap;
    }
    .chip b{color: var(--text)}
    .cardBody{padding: 14px 16px 16px}

    .muted{color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 740px){
      .split{grid-template-columns:1fr}
    }

    /* Pill */
    .pill{
      border: 1px solid rgba(255,255,255,.11);
      border-radius: 999px;
      padding: 10px 12px;
      background: rgba(0,0,0,.18);
      display:flex;align-items:center;justify-content:space-between;gap: 10px;
      min-height: 44px;
    }
    .pill span{font-size: 13px}
    .tag{
      font-size: 11px;
      letter-spacing:.08em;
      text-transform: uppercase;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      white-space:nowrap;
    }

    /* Diagram area */
    .viz{
      border: 1px solid rgba(255,255,255,.11);
      border-radius: var(--radius2);
      background:
        linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.08)),
        repeating-linear-gradient(90deg, transparent, transparent 22px, rgba(255,255,255,.03) 22px, rgba(255,255,255,.03) 23px),
        repeating-linear-gradient(0deg, transparent, transparent 22px, rgba(255,255,255,.03) 22px, rgba(255,255,255,.03) 23px);
      padding: 12px;
      position:relative;
      overflow:hidden;
    }

    svg{display:block;width:100%;height:auto}

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (max-width: 740px){
      .controls{grid-template-columns:1fr}
    }

    .control{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .control label{display:flex;justify-content:space-between;gap:12px;align-items:center;font-size:12px;color:var(--muted);letter-spacing:.08em;text-transform:uppercase}
    input[type="range"]{width:100%;margin-top:10px;accent-color: var(--violet)}
    .control .readout{font-family:var(--mono);font-size:12px;color:var(--text)}

    .legend{
      display:flex;flex-wrap:wrap;gap:8px;
      margin-top: 10px;
    }
    .legend .key{display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.11);background:rgba(0,0,0,.16);font-size:12px;color:var(--muted)}
    .sw{width:10px;height:10px;border-radius:99px}

    /* Flow */
    .flow{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .flowNode{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      padding: 12px;
      position: relative;
    }
    .flowNode h3{margin:0 0 6px;font-size: 14px}
    .flowNode p{margin:0;color:var(--muted);font-size: 13px;line-height:1.5}
    .flowNode .meta{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}
    .badge{font-size:11px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:var(--muted);border-radius:999px;padding:5px 9px}

    /* Checklist */
    .checklist{display:grid;gap: 10px}
    .item{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      padding: 12px;
      display:grid;
      grid-template-columns: 22px 1fr;
      gap: 10px;
      align-items:start;
    }
    .item input{margin-top:3px;accent-color: var(--cyan)}
    .item .t{display:flex;justify-content:space-between;gap:12px;align-items:baseline;flex-wrap:wrap}
    .item .t strong{font-size: 14px}
    .item .t em{font-style:normal;color:var(--muted);font-size:12px}
    .item .d{margin-top:6px;color:var(--muted);font-size: 13px;line-height:1.55}

    /* Risk grid */
    .riskGrid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
    }
    @media (max-width: 640px){
      .riskGrid{grid-template-columns:1fr}
    }

    .risk{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      padding: 12px;
    }
    .risk .rTop{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .risk strong{font-size: 13px}
    .meter{height: 10px;border-radius:99px;background: rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.10);overflow:hidden;margin-top:10px}
    .meter > i{display:block;height:100%;width:50%;background: linear-gradient(90deg, var(--good), var(--warn), var(--bad));filter:saturate(1.1)}
    .risk p{margin:8px 0 0;color:var(--muted);font-size: 12px;line-height:1.45}

    /* Commentary */
    details{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      padding: 12px;
    }
    details + details{margin-top:10px}
    summary{
      cursor:pointer;
      list-style:none;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      user-select:none;
    }
    summary::-webkit-details-marker{display:none}
    summary strong{font-size: 14px}
    summary .hint{font-size:12px;color:var(--muted)}
    .detailBody{margin-top:10px;color:var(--muted);font-size: 13px;line-height:1.6}
    .callout{
      border-left: 3px solid rgba(187,167,255,.7);
      padding: 10px 12px;
      background: rgba(187,167,255,.08);
      border-radius: 14px;
      margin-top: 10px;
      color: rgba(255,255,255,.82);
    }

    /* Footer */
    footer{
      margin-top: 16px;
      padding: 14px 16px;
      border: 1px dashed rgba(255,255,255,.16);
      border-radius: var(--radius);
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
      background: rgba(0,0,0,.14);
    }

    /* Utility */
    .mono{font-family:var(--mono)}
    .row2{display:grid;grid-template-columns: 1fr 1fr;gap: 12px}
    @media (max-width: 860px){.row2{grid-template-columns:1fr}}

    /* Tiny glow separators */
    .hr{
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);
      margin: 12px 0;
    }

    /* Button */
    .btn{
      appearance:none;border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      font-size: 13px;
    }
    .btn:hover{transform: translateY(-1px);border-color: rgba(255,255,255,.26);background: rgba(255,255,255,.07)}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(10,14,22,.78);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.86);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: 0 20px 70px rgba(0,0,0,.5);
      font-size: 12px;
      max-width: min(720px, calc(100vw - 24px));
      display:none;
      backdrop-filter: blur(10px);
      z-index:999;
    }

    /* Quote block */
    .quote{
      border: 1px solid rgba(187,167,255,.18);
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(187,167,255,.06), rgba(122,215,255,.04));
      padding: 16px 18px;
      position: relative;
      margin: 10px 0;
    }
    .quote::before{
      content: "\201C";
      font-size: 48px;
      line-height: 1;
      color: rgba(187,167,255,.3);
      position: absolute;
      top: 6px;
      left: 14px;
    }
    .quote p{
      margin: 0;
      padding-left: 28px;
      font-size: 14px;
      line-height: 1.6;
      font-style: italic;
      color: rgba(255,255,255,.85);
    }
    .quote .attr{
      margin-top: 8px;
      padding-left: 28px;
      font-size: 12px;
      color: var(--violet);
      font-style: normal;
    }

    /* Scenario toggle */
    .scenario{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      padding: 14px;
      transition: border-color .3s ease, background .3s ease;
    }
    .scenario.active{
      border-color: rgba(117,240,182,.3);
      background: rgba(117,240,182,.04);
    }
    .scenario h4{margin: 0 0 6px;font-size: 13px;display:flex;align-items:center;gap:8px}
    .scenario p{margin: 0;color:var(--muted);font-size: 12px;line-height: 1.5}
    .scenarioIcon{
      width: 20px;height: 20px;border-radius:99px;
      display:inline-flex;align-items:center;justify-content:center;
      font-size: 11px;
      border: 1px solid rgba(255,255,255,.15);
      background: rgba(0,0,0,.2);
    }

    /* Cycle diagram nodes */
    .cycleWrap{display:flex;flex-direction:column;gap:8px;align-items:center}
    .cycleArrow{color:var(--violet);font-size:18px;opacity:.6}

    /* Three-col grid */
    .threeGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 10px;
    }
    @media (max-width: 740px){
      .threeGrid{grid-template-columns:1fr}
    }

    /* Animated glow pulse for SVG */
    @keyframes pulse{
      0%,100%{opacity:.4}
      50%{opacity:.9}
    }
    .pulse{animation: pulse 3s ease-in-out infinite}

    /* Habit chain visual */
    .habitChain{
      display:flex;
      align-items:center;
      gap:0;
      flex-wrap:wrap;
      margin: 10px 0;
    }
    .habitLink{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      padding: 8px 14px;
      background: rgba(0,0,0,.18);
      font-size: 12px;
      color: var(--text);
      white-space: nowrap;
      transition: background .2s, border-color .2s;
    }
    .habitLink.active{
      border-color: rgba(117,240,182,.35);
      background: rgba(117,240,182,.08);
    }
    .chainArrow{
      width: 24px;
      text-align: center;
      color: var(--faint);
      font-size: 14px;
      flex-shrink:0;
    }

    /* Phase indicator */
    .phaseBar{
      display: flex;
      border-radius: 99px;
      overflow: hidden;
      height: 8px;
      margin: 10px 0;
      border: 1px solid rgba(255,255,255,.08);
    }
    .phaseBar > span{
      flex: 1;
      transition: flex .5s ease;
    }

    /* Print-friendly */
    @media print{
      body{background:white;color:#111}
      header,.card,details{box-shadow:none}
      .toast{display:none !important}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <header>
      <div class="heroArt" aria-hidden="true">
        <svg viewBox="0 0 520 220" role="img">
          <defs>
            <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="rgba(187,167,255,.55)" />
              <stop offset="1" stop-color="rgba(122,215,255,.55)" />
            </linearGradient>
            <linearGradient id="g2" x1="0" x2="1" y1="1" y2="0">
              <stop offset="0" stop-color="rgba(117,240,182,.45)" />
              <stop offset="1" stop-color="rgba(255,179,138,.35)" />
            </linearGradient>
            <filter id="blurGlow" x="-30%" y="-30%" width="160%" height="160%">
              <feGaussianBlur stdDeviation="14" result="b"/>
              <feColorMatrix in="b" type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="g"/>
              <feMerge>
                <feMergeNode in="g"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          <g filter="url(#blurGlow)">
            <!-- Abstract brain/mind waves -->
            <path d="M40,140 C90,60 140,170 200,100 C260,30 300,160 360,80 C400,30 460,90 500,50" fill="none" stroke="url(#g1)" stroke-width="10" stroke-linecap="round" opacity=".6" />
            <path d="M30,170 C100,100 160,200 240,130 C300,80 370,170 430,110 C470,70 500,120 510,90" fill="none" stroke="url(#g2)" stroke-width="8" stroke-linecap="round" opacity=".5" />
            <!-- Consciousness dots -->
            <circle cx="200" cy="100" r="12" fill="rgba(187,167,255,.5)" class="pulse" />
            <circle cx="360" cy="80" r="9" fill="rgba(122,215,255,.45)" class="pulse" style="animation-delay:.8s" />
            <circle cx="100" cy="130" r="7" fill="rgba(117,240,182,.4)" class="pulse" style="animation-delay:1.5s" />
            <circle cx="440" cy="105" r="6" fill="rgba(255,179,138,.4)" class="pulse" style="animation-delay:2.2s" />
          </g>
        </svg>
      </div>

      <div class="headerGrid">
        <div>
          <div class="kicker"><span class="dot"></span> Jungian psychology &bull; unconscious mind &bull; behavior design</div>
          <h1>How to Outsmart Your Brain with Discipline</h1>
          <p class="subtitle">
            Carl Jung believed the mind cannot be conquered like an enemy. What you have been calling a "lack of discipline" may not be a personal failure at all -- it may be a misunderstanding of how your psyche actually works. This infographic maps the Jungian path from force to flow.
          </p>
          <div class="btnRow">
            <button class="btn" id="jumpIceberg">Explore the iceberg</button>
            <button class="btn" id="jumpDesign">Jump to environment design</button>
            <button class="btn" id="toggleNotes">Toggle commentary mode</button>
          </div>
        </div>

        <div class="topStats" aria-label="Key claims summarized">
          <div class="stat">
            <div class="label">Core insight</div>
            <div class="value" style="color:var(--violet)">Force creates resistance</div>
            <div class="note">The harder you push, the more the unconscious pushes back.</div>
          </div>
          <div class="stat">
            <div class="label">The real lever</div>
            <div class="value" style="color:var(--cyan)">Design, not willpower</div>
            <div class="note">Environment + structure + rhythm outperform raw discipline.</div>
          </div>
          <div class="stat">
            <div class="label">Jung's framework</div>
            <div class="value" style="color:var(--good)">Individuation</div>
            <div class="note">Becoming whole rather than forcing improvement.</div>
          </div>
          <div class="stat">
            <div class="label">Practical method</div>
            <div class="value" style="color:var(--orange)">Remove friction</div>
            <div class="note">Habit stacking, cue alignment, identity shift.</div>
          </div>
        </div>
      </div>
    </header>

    <div class="grid">

      <!-- Card 1: The Discipline Myth -->
      <section class="card" aria-label="The discipline myth">
        <div class="cardHeader">
          <h2>The Discipline Myth: "If you wanted it badly enough..."</h2>
          <div class="chip"><b>Myth vs. Reality</b></div>
        </div>
        <div class="cardBody">
          <div class="split">
            <div>
              <p class="muted" style="margin-top:0">
                Most people carry a deeply embedded belief: <b>"If you really wanted it badly enough, you would do it."</b> This assumption feels so self-evident that it rarely gets questioned. It appears quietly in ordinary moments -- when you reach for your phone instead of getting up, when you open social media instead of working, when you collapse on the couch instead of exercising.
              </p>
              <p class="muted">
                Each time, the same inner voice arrives: <em>"What is wrong with you?"</em> That voice feels like honesty. But Jung would say it is an <b>interpretation layered on top of a biological response</b>. Your brain, still half-asleep, reached for stimulation and comfort because that is what it is designed to do in low-energy states.
              </p>
            </div>
            <div>
              <div class="viz" style="padding:14px" aria-label="Myths vs realities">
                <div class="small" style="margin-bottom:10px">What you believe vs. what is actually happening:</div>
                <div class="flow">
                  <div class="pill"><span><b style="color:var(--bad)">Myth:</b> "I am lazy and undisciplined"</span><span class="tag">belief</span></div>
                  <div class="pill"><span><b style="color:var(--good)">Reality:</b> Your nervous system seeks comfort in low-energy states</span><span class="tag">biology</span></div>
                  <div class="pill"><span><b style="color:var(--bad)">Myth:</b> "I should just try harder"</span><span class="tag">belief</span></div>
                  <div class="pill"><span><b style="color:var(--good)">Reality:</b> The unconscious does not obey conscious commands</span><span class="tag">Jung</span></div>
                  <div class="pill"><span><b style="color:var(--bad)">Myth:</b> "Successful people have more willpower"</span><span class="tag">belief</span></div>
                  <div class="pill"><span><b style="color:var(--good)">Reality:</b> They have better systems and environments</span><span class="tag">design</span></div>
                </div>
              </div>
            </div>
          </div>

          <div class="callout" data-commentary>
            <b>Commentary:</b> This reframe is powerful because it dissolves shame. When you stop treating discipline as a moral quality and start treating it as a design problem, the entire solution space changes. Jung's insight was that shaming the psyche only makes it withdraw further.
          </div>
        </div>
      </section>

      <!-- Card 2 & 3: Iceberg + Force Paradox -->
      <section class="row" aria-label="Unconscious mind">
        <div class="card" id="iceberg" aria-label="The iceberg of the psyche">
          <div class="cardHeader">
            <h2>The Iceberg: Conscious vs. Unconscious</h2>
            <div class="chip">Jung's model of the psyche</div>
          </div>
          <div class="cardBody">
            <p class="muted" style="margin-top:0">
              Jung spent much of his life explaining that <b>what you do not make conscious will express itself anyway</b> -- often in ways that confuse or frustrate you. The conscious mind is only the tip of the iceberg. The unconscious always acts first; conscious intention arrives later, and often too late.
            </p>

            <div class="viz" aria-label="Iceberg visualization">
              <svg viewBox="0 0 500 400" role="img" aria-label="Iceberg showing conscious mind above water and unconscious below">
                <defs>
                  <linearGradient id="water" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0" stop-color="rgba(122,215,255,.12)" />
                    <stop offset="1" stop-color="rgba(122,215,255,.03)" />
                  </linearGradient>
                  <linearGradient id="ice1" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0" stop-color="rgba(255,255,255,.25)" />
                    <stop offset="1" stop-color="rgba(187,167,255,.15)" />
                  </linearGradient>
                  <linearGradient id="ice2" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0" stop-color="rgba(187,167,255,.18)" />
                    <stop offset="1" stop-color="rgba(122,215,255,.08)" />
                  </linearGradient>
                  <filter id="iceGlow" x="-20%" y="-20%" width="140%" height="140%">
                    <feGaussianBlur stdDeviation="6" result="b"/>
                    <feMerge>
                      <feMergeNode in="b"/>
                      <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                  </filter>
                </defs>

                <!-- Water surface line -->
                <rect x="0" y="120" width="500" height="280" fill="url(#water)" />
                <line x1="0" y1="120" x2="500" y2="120" stroke="rgba(122,215,255,.3)" stroke-width="1.5" stroke-dasharray="6 4" />
                <text x="20" y="115" font-size="10" fill="rgba(122,215,255,.6)" font-family="var(--mono)">AWARENESS LINE</text>

                <!-- Above water: small tip -->
                <g filter="url(#iceGlow)">
                  <polygon points="210,40 290,40 310,120 190,120" fill="url(#ice1)" stroke="rgba(255,255,255,.2)" stroke-width="1" />
                </g>
                <text x="250" y="72" text-anchor="middle" font-size="11" fill="rgba(255,255,255,.9)" font-weight="700">CONSCIOUS</text>
                <text x="250" y="88" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.6)">Plans, goals, intentions</text>
                <text x="250" y="100" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.5)">"I will get up early"</text>

                <!-- Below water: massive body -->
                <g filter="url(#iceGlow)">
                  <polygon points="190,120 310,120 380,240 400,340 100,340 120,240" fill="url(#ice2)" stroke="rgba(187,167,255,.15)" stroke-width="1" />
                </g>

                <text x="250" y="160" text-anchor="middle" font-size="12" fill="rgba(187,167,255,.9)" font-weight="700">UNCONSCIOUS</text>
                <text x="250" y="180" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.55)">Energy regulation</text>
                <text x="250" y="196" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.50)">Comfort-seeking impulses</text>
                <text x="250" y="212" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.45)">Emotional protection</text>
                <text x="250" y="228" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.40)">Identity patterns</text>
                <text x="250" y="244" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.35)">Past experiences & habits</text>
                <text x="250" y="260" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.30)">Shadow material</text>
                <text x="250" y="280" text-anchor="middle" font-size="9" fill="rgba(255,255,255,.25)">Archetypal drives</text>

                <!-- Labels -->
                <text x="380" y="70" font-size="10" fill="rgba(255,255,255,.5)">~10%</text>
                <text x="410" y="230" font-size="10" fill="rgba(187,167,255,.5)">~90%</text>

                <!-- Arrow -->
                <line x1="395" y1="76" x2="310" y2="80" stroke="rgba(255,255,255,.2)" stroke-width="1" />
                <line x1="420" y1="236" x2="380" y2="240" stroke="rgba(187,167,255,.2)" stroke-width="1" />
              </svg>
            </div>

            <div class="quote">
              <p>What you do not make conscious will direct your life and you will call it fate.</p>
              <div class="attr">-- Carl Jung</div>
            </div>

            <div class="callout" data-commentary>
              <b>Commentary:</b> The iceberg model is not literally true -- it is a useful metaphor. The key insight is that the part of you making decisions about reaching for the phone, opening social media, or choosing the couch is not the part that made the plan to be disciplined. These are two different systems, and the larger one usually wins.
            </div>
          </div>
        </div>

        <div class="card" aria-label="The force paradox">
          <div class="cardHeader">
            <h2>The Force Paradox</h2>
            <div class="chip"><b>More force = more resistance</b></div>
          </div>
          <div class="cardBody">
            <p class="muted" style="margin-top:0">
              When discipline is framed as a moral failure, resistance grows stronger. <b>The psyche does not like being shamed.</b> When it feels attacked, it protects itself by withdrawing energy. The harder you push, the more resistance you generate.
            </p>

            <div class="viz" aria-label="Force vs Resistance Simulator">
              <svg viewBox="0 0 500 280" id="forceSvg" role="img" aria-label="Graph showing that as force increases, resistance increases even faster">
                <defs>
                  <linearGradient id="forceG" x1="0" x2="1" y1="0" y2="0">
                    <stop offset="0" stop-color="rgba(122,215,255,.8)" />
                    <stop offset="1" stop-color="rgba(255,122,153,.8)" />
                  </linearGradient>
                  <linearGradient id="resistG" x1="0" x2="1" y1="0" y2="0">
                    <stop offset="0" stop-color="rgba(187,167,255,.6)" />
                    <stop offset="1" stop-color="rgba(255,122,153,.9)" />
                  </linearGradient>
                </defs>

                <!-- Axes -->
                <line x1="60" y1="20" x2="60" y2="240" stroke="rgba(255,255,255,.2)" stroke-width="1.2" />
                <line x1="60" y1="240" x2="470" y2="240" stroke="rgba(255,255,255,.2)" stroke-width="1.2" />

                <!-- Labels -->
                <text x="265" y="268" text-anchor="middle" font-size="11" fill="rgba(255,255,255,.55)">Force / Self-pressure applied</text>
                <text x="16" y="135" font-size="11" fill="rgba(255,255,255,.55)" transform="rotate(-90 16 135)">Response</text>

                <!-- Grid lines -->
                <line x1="60" y1="60" x2="470" y2="60" stroke="rgba(255,255,255,.04)" />
                <line x1="60" y1="100" x2="470" y2="100" stroke="rgba(255,255,255,.04)" />
                <line x1="60" y1="140" x2="470" y2="140" stroke="rgba(255,255,255,.04)" />
                <line x1="60" y1="180" x2="470" y2="180" stroke="rgba(255,255,255,.04)" />

                <!-- Effective behavior line (diminishing returns) -->
                <path id="effectLine" fill="none" stroke="url(#forceG)" stroke-width="2.5" stroke-linecap="round" />

                <!-- Resistance line (exponential) -->
                <path id="resistLine" fill="none" stroke="url(#resistG)" stroke-width="2.5" stroke-linecap="round" stroke-dasharray="6 4" />

                <!-- Crossover marker -->
                <circle id="crossDot" r="6" fill="rgba(255,122,153,.7)" stroke="rgba(255,255,255,.3)" stroke-width="1.5" />
                <text id="crossLabel" font-size="10" fill="rgba(255,122,153,.9)"></text>

                <!-- Annotation zone -->
                <rect id="burnZone" rx="8" fill="rgba(255,122,153,.06)" stroke="rgba(255,122,153,.15)" stroke-width="1" />
                <text id="burnLabel" font-size="9" fill="rgba(255,122,153,.6)" text-anchor="middle"></text>
              </svg>

              <div class="legend">
                <div class="key"><span class="sw" style="background:rgba(122,215,255,.8)"></span> Effective behavior (diminishing)</div>
                <div class="key"><span class="sw" style="background:rgba(187,167,255,.7)"></span> Inner resistance (growing)</div>
              </div>
            </div>

            <div class="controls">
              <div class="control">
                <label>
                  <span>Self-pressure level</span>
                  <span class="readout" id="forceReadout">50%</span>
                </label>
                <input id="forceSlider" type="range" min="0" max="100" value="50" />
                <div class="small" style="margin-top:8px">Slide right to see what happens as you increase force.</div>
              </div>
              <div class="control">
                <label>
                  <span>Self-compassion</span>
                  <span class="readout" id="compassionReadout">Low</span>
                </label>
                <input id="compassionSlider" type="range" min="0" max="100" value="20" />
                <div class="small" style="margin-top:8px">Higher compassion reduces the resistance curve.</div>
              </div>
            </div>

            <div class="hr"></div>

            <div class="flow">
              <div class="flowNode">
                <h3>The Erosion of Self-Trust</h3>
                <p>Each time you fail to follow through, you feel a little less reliable to yourself. The unconscious <b>stops taking your plans seriously</b> because experience has taught it that those plans are often followed by pressure, guilt, or exhaustion.</p>
                <div class="meta">
                  <span class="badge">self-trust erodes</span>
                  <span class="badge">plans lose credibility</span>
                  <span class="badge">cycle deepens</span>
                </div>
              </div>
            </div>

            <div class="callout" data-commentary>
              <b>Commentary:</b> This is perhaps the most practically important insight in the entire framework. Force-based discipline does not just fail -- it actively makes the problem worse by training the unconscious to associate your plans with pain. Every broken promise to yourself compounds the pattern.
            </div>
          </div>
        </div>
      </section>

      <!-- Card 4: Three Everyday Scenarios -->
      <section class="card" aria-label="Everyday scenarios">
        <div class="cardHeader">
          <h2>Three Moments of "Failure" -- Reframed</h2>
          <div class="chip"><b>Click to see</b> Jung's lens</div>
        </div>
        <div class="cardBody">
          <p class="muted" style="margin-top:0">
            Jung would ask you to stop judging these moments and start <b>understanding</b> them. Click each scenario to see both the self-critical interpretation and the Jungian reframe.
          </p>

          <div class="threeGrid" id="scenarios">
            <div class="scenario" data-idx="0" onclick="toggleScenario(0)">
              <h4><span class="scenarioIcon" style="color:var(--orange)">A</span> The Morning Phone Grab</h4>
              <p><b>Surface:</b> "You planned to wake early. Instead, your hand reached for the phone. 10 minutes passed, then 20."</p>
              <div class="scenarioReframe" style="display:none;margin-top:10px">
                <div class="hr"></div>
                <p style="color:var(--good);font-size:12px;margin:0 0 4px"><b>Jungian reframe:</b></p>
                <p>Your brain, still half-asleep, reached for stimulation and comfort because that is what it is <b>designed</b> to do in low-energy states. The unconscious does not care about your plans -- it cares about regulating energy and emotion.</p>
                <p style="margin-top:6px"><b style="color:var(--cyan)">Design fix:</b> Leave phone in another room. Place a glass of water and your clothes beside the bed instead.</p>
              </div>
            </div>

            <div class="scenario" data-idx="1" onclick="toggleScenario(1)">
              <h4><span class="scenarioIcon" style="color:var(--cyan)">B</span> The Afternoon Tab-Switch</h4>
              <p><b>Surface:</b> "You sat down at your laptop with a clear goal. Then your fingers drifted. A new tab opened. Social media, news, a video."</p>
              <div class="scenarioReframe" style="display:none;margin-top:10px">
                <div class="hr"></div>
                <p style="color:var(--good);font-size:12px;margin:0 0 4px"><b>Jungian reframe:</b></p>
                <p>You were responding to <b>subtle discomfort</b>. The task felt unclear, effortful, or emotionally empty. The unconscious registered this as a threat to balance and redirected you toward something easier. This redirection did not ask for permission.</p>
                <p style="margin-top:6px"><b style="color:var(--cyan)">Design fix:</b> Break the task into a clear "entry point" -- a single first step so obvious it requires no decision-making.</p>
              </div>
            </div>

            <div class="scenario" data-idx="2" onclick="toggleScenario(2)">
              <h4><span class="scenarioIcon" style="color:var(--violet)">C</span> The Evening Collapse</h4>
              <p><b>Surface:</b> "You come home tired. Your shoulders drop. You had an intention to exercise or read. But the couch wins."</p>
              <div class="scenarioReframe" style="display:none;margin-top:10px">
                <div class="hr"></div>
                <p style="color:var(--good);font-size:12px;margin:0 0 4px"><b>Jungian reframe:</b></p>
                <p>After effort and stress, your nervous system seeks rest and familiarity. It does not understand "long-term self-improvement" as a concept. It understands <b>relief</b>. Nothing is wrong here -- this is exactly how the system was shaped to respond.</p>
                <p style="margin-top:6px"><b style="color:var(--cyan)">Design fix:</b> Stack the desired behavior onto an existing routine. Change clothes immediately. Walk for just 5 minutes. Let momentum carry you.</p>
              </div>
            </div>
          </div>

          <div class="callout" data-commentary>
            <b>Commentary:</b> The pattern across all three scenarios is the same: the conscious mind made a plan, but the unconscious -- which governs ~90% of behavior -- acted on its own logic. Jung would say resistance is not the enemy; it is information. Start listening instead of fighting.
          </div>
        </div>
      </section>

      <!-- Card 5 & 6: Environment Design + Habit Stacking -->
      <section class="row" id="designSection" aria-label="Design solutions">
        <div class="card" aria-label="Environment design audit">
          <div class="cardHeader">
            <h2>Environment Design Audit</h2>
            <div class="chip">structure > willpower</div>
          </div>
          <div class="cardBody">
            <p class="muted" style="margin-top:0">
              Jung understood that the psyche is deeply shaped by its environment. Symbols, spaces, routines, and rhythms speak directly to the unconscious, often more clearly than conscious goals ever could. <b>When the environment supports the behavior, the unconscious cooperates.</b>
            </p>

            <div class="checklist" id="envChecklist">
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Phone out of the bedroom</strong><em>morning cue</em></div>
                  <div class="d">If your phone is within reach, it will be used -- not because you lack discipline, but because your brain evolved to notice and respond to nearby stimuli.</div>
                </div>
              </div>
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Desk cleared before bed</strong><em>reduces cognitive load</em></div>
                  <div class="d">If your workspace is cluttered, your mind mirrors that clutter. When you sit down to work, the unconscious is already overloaded before you begin.</div>
                </div>
              </div>
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Next task pre-loaded</strong><em>zero-friction start</em></div>
                  <div class="d">Open the document you plan to work on the night before and leave it there. In the morning, you sit down and begin with far less resistance.</div>
                </div>
              </div>
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Visible cues for desired behavior</strong><em>environmental prompt</em></div>
                  <div class="d">Running shoes by the door. Book on the pillow. Journal beside the coffee maker. The unconscious follows what it sees.</div>
                </div>
              </div>
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Friction added to unwanted behavior</strong><em>inverse design</em></div>
                  <div class="d">Log out of social media. Delete apps from the home screen. Add distance between you and the distraction.</div>
                </div>
              </div>
              <div class="item">
                <input type="checkbox" />
                <div>
                  <div class="t"><strong>Consistent transition rituals</strong><em>signal the unconscious</em></div>
                  <div class="d">Change clothes when you get home. Make tea before writing. These rituals tell the unconscious: "We are entering a different mode now."</div>
                </div>
              </div>
            </div>

            <div class="hr"></div>
            <div class="btnRow">
              <button class="btn" id="envScoreBtn">Calculate environment score</button>
              <button class="btn" id="envResetBtn">Reset</button>
            </div>
            <div class="small" id="envScoreOut" style="margin-top:10px"></div>

            <div class="callout" data-commentary>
              <b>Commentary:</b> This is the operational heart of the Jungian approach to discipline. You are not building willpower. You are creating <b>harmony between inner intention and outer structure</b>. When the unconscious encounters the right environment, cooperation replaces conflict.
            </div>
          </div>
        </div>

        <div class="card" aria-label="Habit stacking">
          <div class="cardHeader">
            <h2>Habit Stacking: The Unconscious Loves Sequences</h2>
            <div class="chip">rhythm &amp; chain</div>
          </div>
          <div class="cardBody">
            <p class="muted" style="margin-top:0">
              You attach a new behavior to something you already do. The unconscious finds comfort in rhythm. Over time, the new behavior feels natural because it no longer stands alone. <b>There is no inner argument, no self-criticism -- just movement along a familiar track.</b>
            </p>

            <div class="viz" style="padding:14px" aria-label="Habit chain builder">
              <div class="small" style="margin-bottom:12px">Build a habit chain: click links to activate them and see the chain grow</div>

              <div class="habitChain" id="morningChain">
                <div class="habitLink active" data-chain="m" onclick="toggleChainLink(this)">Wake up</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="m" onclick="toggleChainLink(this)">Drink water</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="m" onclick="toggleChainLink(this)">5-min stretch</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="m" onclick="toggleChainLink(this)">Journal</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="m" onclick="toggleChainLink(this)">Deep work</div>
              </div>

              <div class="small" style="margin:14px 0 6px;color:var(--faint)">Evening chain:</div>
              <div class="habitChain" id="eveningChain">
                <div class="habitLink active" data-chain="e" onclick="toggleChainLink(this)">Arrive home</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="e" onclick="toggleChainLink(this)">Change clothes</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="e" onclick="toggleChainLink(this)">Short walk</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="e" onclick="toggleChainLink(this)">Prepare food</div>
                <div class="chainArrow">&#8594;</div>
                <div class="habitLink" data-chain="e" onclick="toggleChainLink(this)">Read / reflect</div>
              </div>

              <div class="hr"></div>
              <div class="small"><b>Key principle:</b> Each link triggers the next. The first link is always something you already do automatically. The unconscious follows sequences, not isolated commands.</div>
            </div>

            <div style="height:12px"></div>

            <div class="viz" aria-label="Sequence vs isolated command">
              <svg viewBox="0 0 500 200" role="img">
                <defs>
                  <filter id="softGlow" x="-20%" y="-20%" width="140%" height="140%">
                    <feGaussianBlur stdDeviation="4" result="b"/>
                    <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                  </filter>
                </defs>

                <!-- Top: isolated commands (scattered, fading) -->
                <text x="20" y="24" font-size="11" fill="rgba(255,122,153,.7)" font-weight="600">Isolated commands (high friction):</text>
                <g filter="url(#softGlow)" opacity=".7">
                  <rect x="20" y="35" width="80" height="30" rx="15" fill="rgba(255,122,153,.1)" stroke="rgba(255,122,153,.25)" />
                  <text x="60" y="55" text-anchor="middle" font-size="9" fill="rgba(255,122,153,.7)">Exercise!</text>
                  <rect x="140" y="42" width="60" height="30" rx="15" fill="rgba(255,122,153,.1)" stroke="rgba(255,122,153,.25)" />
                  <text x="170" y="62" text-anchor="middle" font-size="9" fill="rgba(255,122,153,.7)">Read!</text>
                  <rect x="240" y="32" width="80" height="30" rx="15" fill="rgba(255,122,153,.1)" stroke="rgba(255,122,153,.25)" />
                  <text x="280" y="52" text-anchor="middle" font-size="9" fill="rgba(255,122,153,.7)">Journal!</text>
                  <rect x="360" y="45" width="100" height="30" rx="15" fill="rgba(255,122,153,.1)" stroke="rgba(255,122,153,.25)" />
                  <text x="410" y="65" text-anchor="middle" font-size="9" fill="rgba(255,122,153,.7)">Be productive!</text>
                </g>
                <text x="480" y="52" text-anchor="end" font-size="9" fill="rgba(255,122,153,.5)">scattered</text>

                <!-- Divider -->
                <line x1="20" y1="90" x2="480" y2="90" stroke="rgba(255,255,255,.08)" />

                <!-- Bottom: linked chain (flowing, connected) -->
                <text x="20" y="116" font-size="11" fill="rgba(117,240,182,.7)" font-weight="600">Stacked sequence (low friction):</text>
                <g filter="url(#softGlow)">
                  <rect x="20" y="128" width="72" height="30" rx="15" fill="rgba(117,240,182,.08)" stroke="rgba(117,240,182,.25)" />
                  <text x="56" y="148" text-anchor="middle" font-size="9" fill="rgba(117,240,182,.8)">Coffee</text>

                  <line x1="92" y1="143" x2="108" y2="143" stroke="rgba(117,240,182,.3)" stroke-width="2" />
                  <polygon points="106,139 114,143 106,147" fill="rgba(117,240,182,.4)" />

                  <rect x="114" y="128" width="72" height="30" rx="15" fill="rgba(117,240,182,.10)" stroke="rgba(117,240,182,.3)" />
                  <text x="150" y="148" text-anchor="middle" font-size="9" fill="rgba(117,240,182,.85)">Journal</text>

                  <line x1="186" y1="143" x2="202" y2="143" stroke="rgba(117,240,182,.3)" stroke-width="2" />
                  <polygon points="200,139 208,143 200,147" fill="rgba(117,240,182,.4)" />

                  <rect x="208" y="128" width="72" height="30" rx="15" fill="rgba(117,240,182,.12)" stroke="rgba(117,240,182,.35)" />
                  <text x="244" y="148" text-anchor="middle" font-size="9" fill="rgba(117,240,182,.9)">Stretch</text>

                  <line x1="280" y1="143" x2="296" y2="143" stroke="rgba(117,240,182,.3)" stroke-width="2" />
                  <polygon points="294,139 302,143 294,147" fill="rgba(117,240,182,.4)" />

                  <rect x="302" y="128" width="82" height="30" rx="15" fill="rgba(117,240,182,.14)" stroke="rgba(117,240,182,.4)" />
                  <text x="343" y="148" text-anchor="middle" font-size="9" fill="rgba(117,240,182,.95)">Deep work</text>
                </g>
                <text x="480" y="148" text-anchor="end" font-size="9" fill="rgba(117,240,182,.5)">flowing</text>

                <!-- Bottom annotation -->
                <text x="250" y="186" text-anchor="middle" font-size="10" fill="rgba(255,255,255,.45)" font-style="italic">"The unconscious loves sequences. It finds comfort in rhythm."</text>
              </svg>
            </div>

            <div class="callout" data-commentary>
              <b>Commentary:</b> Jung would describe this as creating harmony between inner intention and outer structure. Habit stacking works because it speaks the language the unconscious actually understands: rhythm, sequence, familiarity. Not willpower. Not commands. <b>Patterns.</b>
            </div>
          </div>
        </div>
      </section>

      <!-- Card 7: The Identity Shift -->
      <section class="card" aria-label="Identity shift">
        <div class="cardHeader">
          <h2>The Identity Shift: The Unconscious Watches What You Do</h2>
          <div class="chip"><b>Being</b> > doing</div>
        </div>
        <div class="cardBody">
          <div class="split">
            <div>
              <p class="muted" style="margin-top:0">
                Jung believed that the deepest changes in behavior emerge from <b>shifts in identity</b> -- not the identity you declare, but the one that forms quietly through repeated experience. The unconscious watches what you do, not what you promise.
              </p>
              <p class="muted">
                Over time, it builds a story about who you are. When you begin to act differently, even in small ways, the unconscious takes note. The inner story updates.
              </p>

              <div class="flow" style="margin-top:12px">
                <div class="flowNode">
                  <h3 style="color:var(--bad)">Old identity loop</h3>
                  <p>"I am someone who struggles with consistency. Someone who starts but does not finish."</p>
                  <div class="meta"><span class="badge" style="border-color:rgba(255,122,153,.2)">self-label</span><span class="badge" style="border-color:rgba(255,122,153,.2)">pattern confirmation</span></div>
                </div>
                <div class="flowNode">
                  <h3 style="color:var(--good)">New identity loop</h3>
                  <p>"I am someone who follows gentle structure. I move in the direction that feels coherent."</p>
                  <div class="meta"><span class="badge" style="border-color:rgba(117,240,182,.2)">pattern update</span><span class="badge" style="border-color:rgba(117,240,182,.2)">self-trust grows</span></div>
                </div>
              </div>
            </div>

            <div>
              <div class="viz" aria-label="Identity formation cycle">
                <svg viewBox="0 0 420 380" role="img" aria-label="Circular diagram showing how actions form identity">
                  <defs>
                    <filter id="idGlow" x="-20%" y="-20%" width="140%" height="140%">
                      <feGaussianBlur stdDeviation="5" result="b"/>
                      <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                    </filter>
                  </defs>

                  <!-- Central circle -->
                  <g filter="url(#idGlow)">
                    <circle cx="210" cy="190" r="60" fill="rgba(187,167,255,.06)" stroke="rgba(187,167,255,.25)" stroke-width="1.5" />
                    <text x="210" y="183" text-anchor="middle" font-size="13" fill="rgba(187,167,255,.9)" font-weight="700">IDENTITY</text>
                    <text x="210" y="200" text-anchor="middle" font-size="10" fill="rgba(255,255,255,.5)">"Who I am"</text>
                  </g>

                  <!-- Orbit nodes -->
                  <!-- Top: Small Actions -->
                  <circle cx="210" cy="60" r="40" fill="rgba(117,240,182,.06)" stroke="rgba(117,240,182,.2)" stroke-width="1" />
                  <text x="210" y="56" text-anchor="middle" font-size="10" fill="rgba(117,240,182,.85)" font-weight="600">Small</text>
                  <text x="210" y="70" text-anchor="middle" font-size="10" fill="rgba(117,240,182,.85)" font-weight="600">Actions</text>

                  <!-- Right: Unconscious Notes -->
                  <circle cx="360" cy="190" r="40" fill="rgba(122,215,255,.06)" stroke="rgba(122,215,255,.2)" stroke-width="1" />
                  <text x="360" y="186" text-anchor="middle" font-size="10" fill="rgba(122,215,255,.85)" font-weight="600">Unconscious</text>
                  <text x="360" y="200" text-anchor="middle" font-size="10" fill="rgba(122,215,255,.85)" font-weight="600">Observes</text>

                  <!-- Bottom: Story Updates -->
                  <circle cx="210" cy="320" r="40" fill="rgba(255,210,122,.06)" stroke="rgba(255,210,122,.2)" stroke-width="1" />
                  <text x="210" y="316" text-anchor="middle" font-size="10" fill="rgba(255,210,122,.85)" font-weight="600">Inner Story</text>
                  <text x="210" y="330" text-anchor="middle" font-size="10" fill="rgba(255,210,122,.85)" font-weight="600">Updates</text>

                  <!-- Left: Effort Decreases -->
                  <circle cx="60" cy="190" r="40" fill="rgba(255,179,138,.06)" stroke="rgba(255,179,138,.2)" stroke-width="1" />
                  <text x="60" y="186" text-anchor="middle" font-size="10" fill="rgba(255,179,138,.85)" font-weight="600">Effort</text>
                  <text x="60" y="200" text-anchor="middle" font-size="10" fill="rgba(255,179,138,.85)" font-weight="600">Decreases</text>

                  <!-- Arrows (circular flow) -->
                  <g stroke-width="1.5" fill="none" opacity=".4">
                    <path d="M240,72 C280,80 320,120 348,155" stroke="rgba(117,240,182,.7)" />
                    <path d="M358,230 C340,280 290,310 250,318" stroke="rgba(122,215,255,.7)" />
                    <path d="M170,318 C130,300 80,260 65,230" stroke="rgba(255,210,122,.7)" />
                    <path d="M65,150 C80,110 130,80 170,65" stroke="rgba(255,179,138,.7)" />
                  </g>

                  <!-- Arrow tips -->
                  <polygon points="346,152 352,160 342,160" fill="rgba(117,240,182,.5)" />
                  <polygon points="250,316 246,324 254,324" fill="rgba(122,215,255,.5)" />
                  <polygon points="66,232 60,224 70,226" fill="rgba(255,210,122,.5)" />
                  <polygon points="172,66 166,60 168,72" fill="rgba(255,179,138,.5)" />
                </svg>
              </div>

              <div class="small" style="margin-top:8px">The cycle: act small --> unconscious notices --> story shifts --> identity forms --> effort decreases --> act becomes natural --> repeat.</div>
            </div>
          </div>

          <div class="quote" style="margin-top:14px">
            <p>Discipline becomes a side effect of alignment. When who you are and what you do begin to match, effort decreases. You are no longer dragging yourself forward. You are moving in the direction that feels coherent.</p>
            <div class="attr">-- Jungian principle of individuation</div>
          </div>

          <div class="callout" data-commentary>
            <b>Commentary:</b> This is the deepest layer of the argument. Surface-level tips (clear desk, habit stacking) work because they gradually shift your identity. But the real transformation happens when the unconscious updates its story about who you are. You cannot force this -- you can only create the conditions for it.
          </div>
        </div>
      </section>

      <!-- Card 8: Individuation - The Integration -->
      <section class="card" aria-label="Individuation">
        <div class="cardHeader">
          <h2>Individuation: When Discipline Becomes Invisible</h2>
          <div class="chip"><b>Wholeness</b> > improvement</div>
        </div>
        <div class="cardBody">
          <div class="split">
            <div>
              <p class="muted" style="margin-top:0">
                Jung called this process <b>individuation</b> -- becoming whole rather than forcing improvement. When the conscious and unconscious are aligned, energy flows. When they are at war, energy drains away.
              </p>

              <div class="viz" style="padding:14px" aria-label="Individuation spectrum">
                <div class="small" style="margin-bottom:10px">The spectrum from conflict to coherence:</div>

                <div style="position:relative;height:60px;margin:16px 0">
                  <div class="phaseBar" id="phaseBar">
                    <span style="background: linear-gradient(90deg, rgba(255,122,153,.5), rgba(255,210,122,.4)); flex:var(--conflict,3)"></span>
                    <span style="background: linear-gradient(90deg, rgba(255,210,122,.4), rgba(117,240,182,.3)); flex:var(--transition,4)"></span>
                    <span style="background: linear-gradient(90deg, rgba(117,240,182,.3), rgba(187,167,255,.5)); flex:var(--flow,3)"></span>
                  </div>
                  <div style="display:flex;justify-content:space-between;margin-top:8px">
                    <span class="small" style="color:var(--bad)">Inner War</span>
                    <span class="small" style="color:var(--warn)">Designing</span>
                    <span class="small" style="color:var(--good)">Flow State</span>
                    <span class="small" style="color:var(--violet)">Individuation</span>
                  </div>
                </div>

                <div class="controls" style="margin-top:14px">
                  <div class="control">
                    <label>
                      <span>Your current phase</span>
                      <span class="readout" id="phaseReadout">Designing</span>
                    </label>
                    <input id="phaseSlider" type="range" min="0" max="100" value="35" />
                  </div>
                </div>
              </div>

              <div class="hr"></div>

              <div class="riskGrid">
                <div class="risk">
                  <div class="rTop"><strong>Energy when at war</strong><span class="badge" style="color:var(--bad)">drained</span></div>
                  <div class="meter"><i style="width:80%;background:linear-gradient(90deg, var(--bad), var(--warn))"></i></div>
                  <p>Constant self-criticism, broken promises, shame spiral. The psyche rebels out of self-protection.</p>
                </div>
                <div class="risk">
                  <div class="rTop"><strong>Energy when aligned</strong><span class="badge" style="color:var(--good)">flowing</span></div>
                  <div class="meter"><i style="width:30%;background:linear-gradient(90deg, var(--good), var(--cyan))"></i></div>
                  <p>Movement feels natural. There is no heroism, just ease. Discipline becomes quiet, almost invisible.</p>
                </div>
              </div>
            </div>

            <div>
              <div class="viz" aria-label="Integration visualization">
                <svg viewBox="0 0 420 420" role="img" aria-label="Two circles merging to represent conscious and unconscious alignment">
                  <defs>
                    <radialGradient id="rg1" cx=".5" cy=".5" r=".5">
                      <stop offset="0" stop-color="rgba(122,215,255,.2)" />
                      <stop offset="1" stop-color="rgba(122,215,255,0)" />
                    </radialGradient>
                    <radialGradient id="rg2" cx=".5" cy=".5" r=".5">
                      <stop offset="0" stop-color="rgba(187,167,255,.2)" />
                      <stop offset="1" stop-color="rgba(187,167,255,0)" />
                    </radialGradient>
                    <filter id="mergeGlow" x="-30%" y="-30%" width="160%" height="160%">
                      <feGaussianBlur stdDeviation="10" result="b"/>
                      <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                    </filter>
                  </defs>

                  <!-- Conscious circle -->
                  <g id="consciousCircle" filter="url(#mergeGlow)">
                    <circle cx="170" cy="210" r="90" fill="url(#rg1)" stroke="rgba(122,215,255,.3)" stroke-width="1.5" />
                    <text x="140" y="206" font-size="12" fill="rgba(122,215,255,.8)" font-weight="600">Conscious</text>
                    <text x="140" y="222" font-size="10" fill="rgba(122,215,255,.5)">Plans, goals</text>
                  </g>

                  <!-- Unconscious circle -->
                  <g id="unconsciousCircle" filter="url(#mergeGlow)">
                    <circle cx="250" cy="210" r="90" fill="url(#rg2)" stroke="rgba(187,167,255,.3)" stroke-width="1.5" />
                    <text x="260" y="206" font-size="12" fill="rgba(187,167,255,.8)" font-weight="600">Unconscious</text>
                    <text x="260" y="222" font-size="10" fill="rgba(187,167,255,.5)">Drives, patterns</text>
                  </g>

                  <!-- Overlap area label -->
                  <text id="overlapLabel" x="210" y="168" text-anchor="middle" font-size="11" fill="rgba(117,240,182,.8)" font-weight="700">ALIGNMENT</text>
                  <text id="overlapSub" x="210" y="182" text-anchor="middle" font-size="9" fill="rgba(117,240,182,.5)">Energy flows here</text>

                  <!-- Bottom text -->
                  <text x="210" y="360" text-anchor="middle" font-size="10" fill="rgba(255,255,255,.4)" font-style="italic">Drag the slider above to merge the circles</text>

                  <!-- Arrow annotation -->
                  <text x="210" y="390" text-anchor="middle" font-size="10" fill="rgba(255,255,255,.35)">More overlap = less internal friction = discipline becomes natural</text>
                </svg>
              </div>
            </div>
          </div>

          <div class="quote">
            <p>The question to sit with is not how to force discipline but how to live in a way that makes discipline unnecessary. What would change if you treated resistance as guidance instead of failure?</p>
            <div class="attr">-- Closing reflection</div>
          </div>

          <div class="callout" data-commentary>
            <b>Commentary:</b> Individuation is not a destination but a process. The practical takeaway is that discipline is not a muscle you build through suffering -- it is a <b>byproduct of self-understanding</b>. When you stop fighting yourself and start designing for yourself, discipline becomes quiet, almost invisible. The relief in this realization is profound: you were never broken. You were simply trying to change in a way the psyche resists.
          </div>
        </div>
      </section>

      <!-- Summary / Takeaways -->
      <section class="card" aria-label="Key takeaways">
        <div class="cardHeader">
          <h2>The Complete Reframe: From Force to Flow</h2>
          <div class="chip"><b>Summary</b></div>
        </div>
        <div class="cardBody">
          <div class="threeGrid">
            <div class="flowNode">
              <h3 style="color:var(--bad)">1) Stop: Fighting yourself</h3>
              <p>Force-based discipline creates a paradox. It erodes self-trust and trains the unconscious to associate your plans with pain.</p>
              <div class="meta"><span class="badge">drop the shame</span><span class="badge">stop pushing</span></div>
            </div>
            <div class="flowNode">
              <h3 style="color:var(--warn)">2) Start: Designing your world</h3>
              <p>Remove friction. Stack habits. Arrange your environment so the desired behavior becomes the path of least resistance.</p>
              <div class="meta"><span class="badge">environment</span><span class="badge">rhythm</span><span class="badge">sequence</span></div>
            </div>
            <div class="flowNode">
              <h3 style="color:var(--good)">3) Become: Who you already are</h3>
              <p>Small consistent actions update the inner story. Identity shifts. Discipline becomes a side effect of alignment.</p>
              <div class="meta"><span class="badge">individuation</span><span class="badge">wholeness</span><span class="badge">flow</span></div>
            </div>
          </div>

          <div class="hr"></div>

          <details data-commentary>
            <summary><strong>Why this matters beyond productivity</strong><span class="hint">click to expand</span></summary>
            <div class="detailBody">
              <p>
                Jung's real point was never about getting more done. It was about ending the war within. When you treat every failure of discipline as proof that you are broken, you accumulate a kind of psychological debt -- shame, distrust, withdrawal of energy. The reframe presented here is not a productivity hack. It is a path toward <b>self-compassion grounded in understanding</b>, which is what Jung meant by individuation.
              </p>
              <p style="margin-top:8px">
                The practical tools (environment design, habit stacking, identity shift) are entry points. The deeper work is learning to listen to your resistance instead of crushing it.
              </p>
            </div>
          </details>

          <details data-commentary>
            <summary><strong>Limitations and caveats</strong><span class="hint">click to expand</span></summary>
            <div class="detailBody">
              <p>
                This infographic distills ideas from a narration inspired by Jung's work. It is not a clinical tool. Some people struggle with discipline due to neurological conditions (ADHD, executive dysfunction, depression), trauma, or systemic factors that environment design alone cannot resolve. If you recognize persistent patterns that feel beyond your control, professional support may be valuable.
              </p>
              <p style="margin-top:8px">
                The "Jungian" framing here is also an interpretation -- Jung's actual writings are dense, symbolic, and more nuanced than any summary can capture. Treat this as an entry point for reflection, not as doctrine.
              </p>
            </div>
          </details>
        </div>
      </section>

      <!-- About commentary toggle -->
      <section class="card" aria-label="About commentary mode">
        <div class="cardHeader">
          <h2>About the "commentary mode" toggle</h2>
          <div class="chip">meta-analysis on/off</div>
        </div>
        <div class="cardBody">
          <p class="muted" style="margin-top:0">
            Throughout this page, purple-tinted callout boxes (marked with <code>data-commentary</code>) offer meta-level commentary:
            deeper analysis, alternative framings, and practical implications.
          </p>
          <p class="muted">
            By default, commentary is <b>visible</b>. Click "Toggle commentary mode" at the top to hide/show all commentary boxes at once.
            This lets you switch between the core narrative and the analytical layer.
          </p>
        </div>
      </section>

    </div>

    <footer>
      <p>
        <b>Credits &amp; disclaimers:</b> This interactive infographic was generated to translate a narration about Jungian psychology and discipline.
        It is not clinical advice. Visualizations, interactive elements, and commentary are conceptual tools to help you think about these ideas, not substitutes for professional guidance.
      </p>
      <p style="margin-top:10px">
        Based on the ideas of Carl Gustav Jung. For deeper exploration: <i>Memories, Dreams, Reflections</i> (Jung), <i>The Undiscovered Self</i> (Jung), <i>Atomic Habits</i> (Clear) for the design/habit-stacking framework.
      </p>
    </footer>

  </div>

  <div class="toast" id="toast"></div>

  <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Force Paradox Simulator
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const forceSlider = document.getElementById('forceSlider');
    const compassionSlider = document.getElementById('compassionSlider');
    const forceReadout = document.getElementById('forceReadout');
    const compassionReadout = document.getElementById('compassionReadout');

    function renderForceGraph() {
      const force = parseInt(forceSlider.value) / 100;
      const compassion = parseInt(compassionSlider.value) / 100;

      forceReadout.textContent = `${forceSlider.value}%`;
      const compassionLabels = ['Very low', 'Low', 'Medium', 'High', 'Very high'];
      compassionReadout.textContent = compassionLabels[Math.min(4, Math.floor(compassion * 5))];

      const W = 500, xStart = 60, xEnd = 470, yTop = 30, yBot = 240;
      const points = 50;

      let effectPath = '';
      let resistPath = '';
      let crossX = null, crossY = null;

      for (let i = 0; i <= points; i++) {
        const t = i / points;
        const x = xStart + t * (xEnd - xStart);

        // Effective behavior: logarithmic curve (diminishing returns)
        const effectY = yBot - (yBot - yTop) * 0.75 * (1 - Math.exp(-3 * t));

        // Resistance: exponential, modified by compassion (higher compassion = lower resistance)
        const resistFactor = 1.0 - compassion * 0.6;
        const resistY = yBot - (yBot - yTop) * resistFactor * (Math.exp(2.5 * t) - 1) / (Math.exp(2.5) - 1);

        const cmd = i === 0 ? 'M' : 'L';
        effectPath += `${cmd}${x.toFixed(1)},${effectY.toFixed(1)} `;
        resistPath += `${cmd}${x.toFixed(1)},${resistY.toFixed(1)} `;

        // Find crossover
        if (crossX === null && resistY <= effectY) {
          crossX = x;
          crossY = effectY;
        }
      }

      document.getElementById('effectLine').setAttribute('d', effectPath);
      document.getElementById('resistLine').setAttribute('d', resistPath);

      const crossDot = document.getElementById('crossDot');
      const crossLabel = document.getElementById('crossLabel');
      const burnZone = document.getElementById('burnZone');
      const burnLabel = document.getElementById('burnLabel');

      if (crossX !== null) {
        crossDot.setAttribute('cx', crossX);
        crossDot.setAttribute('cy', crossY);
        crossDot.style.display = '';
        crossLabel.textContent = 'Burnout point';
        crossLabel.setAttribute('x', crossX - 4);
        crossLabel.setAttribute('y', crossY - 14);
        crossLabel.style.display = '';

        burnZone.setAttribute('x', crossX);
        burnZone.setAttribute('y', yTop);
        burnZone.setAttribute('width', xEnd - crossX);
        burnZone.setAttribute('height', yBot - yTop);
        burnZone.style.display = '';
        burnLabel.textContent = 'RESISTANCE ZONE';
        burnLabel.setAttribute('x', crossX + (xEnd - crossX) / 2);
        burnLabel.setAttribute('y', yTop + 18);
        burnLabel.style.display = '';
      } else {
        crossDot.style.display = 'none';
        crossLabel.style.display = 'none';
        burnZone.style.display = 'none';
        burnLabel.style.display = 'none';
      }

      // Show current force marker
      const markerX = xStart + force * (xEnd - xStart);
      const svg = document.getElementById('forceSvg');
      let marker = document.getElementById('forceMarker');
      if (!marker) {
        marker = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        marker.id = 'forceMarker';
        marker.setAttribute('stroke', 'rgba(255,255,255,.25)');
        marker.setAttribute('stroke-width', '1');
        marker.setAttribute('stroke-dasharray', '4 4');
        svg.appendChild(marker);
      }
      marker.setAttribute('x1', markerX);
      marker.setAttribute('y1', yTop);
      marker.setAttribute('x2', markerX);
      marker.setAttribute('y2', yBot);
    }

    forceSlider.addEventListener('input', renderForceGraph);
    compassionSlider.addEventListener('input', renderForceGraph);
    renderForceGraph();

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Phase Slider (Individuation spectrum)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const phaseSlider = document.getElementById('phaseSlider');
    const phaseReadout = document.getElementById('phaseReadout');

    function renderPhase() {
      const val = parseInt(phaseSlider.value);
      const phases = [
        { label: 'Inner War', color: 'var(--bad)' },
        { label: 'Awareness', color: 'var(--orange)' },
        { label: 'Designing', color: 'var(--warn)' },
        { label: 'Practicing', color: 'var(--cyan)' },
        { label: 'Flow State', color: 'var(--good)' },
        { label: 'Individuation', color: 'var(--violet)' }
      ];
      const idx = Math.min(5, Math.floor(val / 100 * 6));
      phaseReadout.textContent = phases[idx].label;
      phaseReadout.style.color = phases[idx].color;

      // Adjust phase bar proportions
      const conflict = Math.max(1, 10 - val / 10);
      const transition = 4;
      const flow = Math.max(1, val / 10);

      const bar = document.getElementById('phaseBar');
      bar.style.setProperty('--conflict', conflict);
      bar.style.setProperty('--transition', transition);
      bar.style.setProperty('--flow', flow);

      // Move Venn diagram circles
      const overlap = val / 100; // 0 to 1
      const maxSep = 80; // max separation
      const sep = maxSep * (1 - overlap);

      const conscious = document.getElementById('consciousCircle');
      const unconscious = document.getElementById('unconsciousCircle');

      if (conscious && unconscious) {
        const center = 210;
        const cX = center - sep;
        const uX = center + sep;

        conscious.querySelector('circle').setAttribute('cx', cX);
        conscious.querySelectorAll('text').forEach(t => {
          const origX = parseFloat(t.getAttribute('x'));
          t.setAttribute('x', cX - 30);
        });

        unconscious.querySelector('circle').setAttribute('cx', uX);
        unconscious.querySelectorAll('text').forEach(t => {
          t.setAttribute('x', uX + 10);
        });

        // Update overlap labels
        document.getElementById('overlapLabel').setAttribute('x', center);
        document.getElementById('overlapSub').setAttribute('x', center);

        const overlapSize = Math.max(0, 90 - sep);
        if (overlapSize > 20) {
          document.getElementById('overlapLabel').style.display = '';
          document.getElementById('overlapSub').style.display = '';
        } else {
          document.getElementById('overlapLabel').style.display = 'none';
          document.getElementById('overlapSub').style.display = 'none';
        }
      }
    }

    phaseSlider.addEventListener('input', renderPhase);
    renderPhase();

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Scenario Toggle
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleScenario(idx) {
      const scenarios = document.querySelectorAll('.scenario');
      const target = scenarios[idx];
      const reframe = target.querySelector('.scenarioReframe');
      const isVisible = reframe.style.display !== 'none';

      reframe.style.display = isVisible ? 'none' : 'block';
      target.classList.toggle('active', !isVisible);
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Habit Chain Toggle
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleChainLink(el) {
      el.classList.toggle('active');

      // Count active links
      const chain = el.dataset.chain;
      const links = document.querySelectorAll(`.habitLink[data-chain="${chain}"]`);
      const activeCount = Array.from(links).filter(l => l.classList.contains('active')).length;
      const total = links.length;

      if (activeCount === total) {
        showToast(chain === 'm' ? 'Morning chain complete!' : 'Evening chain complete!');
      }
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Navigation buttons
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('jumpIceberg').addEventListener('click', () => {
      document.getElementById('iceberg').scrollIntoView({ behavior: 'smooth', block: 'center' });
    });

    document.getElementById('jumpDesign').addEventListener('click', () => {
      document.getElementById('designSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Commentary toggle
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let commentaryVisible = true;
    document.getElementById('toggleNotes').addEventListener('click', () => {
      commentaryVisible = !commentaryVisible;
      const items = document.querySelectorAll('[data-commentary]');
      items.forEach(el => {
        el.style.display = commentaryVisible ? '' : 'none';
      });
      showToast(commentaryVisible ? 'Commentary visible' : 'Commentary hidden');
    });

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Environment Audit Scoring
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('envScoreBtn').addEventListener('click', () => {
      const checkboxes = document.querySelectorAll('#envChecklist input[type="checkbox"]');
      const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
      const total = checkboxes.length;
      const pct = Math.round((checked / total) * 100);

      let msg = '';
      if (pct >= 85) msg = `${pct}% -- Your environment is highly aligned with your intentions. The unconscious has clear cues.`;
      else if (pct >= 60) msg = `${pct}% -- Good foundation. A few more adjustments could reduce friction significantly.`;
      else if (pct >= 40) msg = `${pct}% -- Moderate. Pick the 1-2 easiest changes and start there.`;
      else msg = `${pct}% -- Lots of room to improve. Start with the phone and desk -- those are your highest-leverage changes.`;

      document.getElementById('envScoreOut').innerHTML = `<b>Environment alignment:</b> ${msg}`;
      showToast('Score calculated');
    });

    document.getElementById('envResetBtn').addEventListener('click', () => {
      const checkboxes = document.querySelectorAll('#envChecklist input[type="checkbox"]');
      checkboxes.forEach(cb => cb.checked = false);
      document.getElementById('envScoreOut').innerHTML = '';
      showToast('Checklist reset');
    });

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Toast notification
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }
  </script>
</body>
</html>
